@use "sass:map";
@use "sass:meta";
@use "./color" as c;

@function palette-get($keys...) {
  $cur: c.$palette;
  $path: "palette";

  @each $k in $keys {
    $path: $path + "." + $k;

    @if meta.type-of($cur) != "map" {
      @error "palette-get: #{$path} is not a map (got #{meta.type-of($cur)}).";
    }

    @if not map.has-key($cur, $k) {
      @error "palette-get: key '#{$k}' not found at #{$path}.";
    }

    $cur: map.get($cur, $k);
  }

  @return $cur;
}

$semantic: (
  canvas: (
    primary: palette-get(black),
  ),
  text: (
    primary: palette-get(white),
    secondary: palette-get(gray, 300),
    hero: linear-gradient(
        to right,
        palette-get(blue, 200) 0%,
        palette-get(purple, 100) 100%
      ),
    role: palette-get(blue, 100),
  ),
);

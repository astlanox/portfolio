@use "sass:map";
@use "sass:meta";
@use "./color" as c;

@function palette-get($keys...) {
  $cur: c.$palette;
  $path: "palette";

  @each $k in $keys {
    $path: $path + "." + $k;

    @if meta.type-of($cur) != "map" {
      @error "palette-get: #{$path} is not a map (got #{meta.type-of($cur)}).";
    }

    @if not map.has-key($cur, $k) {
      @error "palette-get: key '#{$k}' not found at #{$path}.";
    }

    $cur: map.get($cur, $k);
  }

  @return $cur;
}

$semantic: (
  bg: (
    primary: palette-get(black),
  ),
);

---
import IconEmail from "@/assets/icons/icon_signal.svg";
import { Urls } from "@/constants/meta";
import Button from "@/elements/Button.astro";
import Text from "@/elements/Text.astro";

const { isSmall = false } = Astro.props;

const classList = ["container"];
if (isSmall) classList.push("container-small");
---

<div class={classList.join(" ") || undefined}>
  <div class="content">
    <div class="content-inner">
      <div class="content-text">
        <Text color="primary" size="small" weight="bold" nowrap>Signal standing byâ€¦</Text>
      </div>

      <Button link={Urls.CONTACT} label={isSmall ? "" : "Communicate"}>
        <IconEmail slot="icon" />
      </Button>
    </div>
  </div>

  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <defs>
      <filter id="glass-distortion" x="0%" y="0%" width="100%" height="100%">
        <feTurbulence type="fractalNoise" baseFrequency="0.008 0.008" numOctaves="2" seed="92" result="noise">
        </feTurbulence>
        <feGaussianBlur in="noise" stdDeviation="2" result="blurred"></feGaussianBlur>
        <feDisplacementMap in="SourceGraphic" in2="blurred" scale="77" xChannelSelector="R" yChannelSelector="G">
        </feDisplacementMap>
      </filter>
    </defs>
  </svg>
</div>

<style lang="scss">
  @use "@/styles/tokens" as *;
  @use "@/styles/utilities" as *;

  .content {
    position: relative;
    overflow: hidden;
    border: 2px solid t(border, transparent);
    border-radius: rd(small);
    box-shadow: 0 6px 24px rgb(0 0 0 / 10%);
    isolation: isolate;

    &:focus {
      outline: none;
    }

    &::before,
    &::after {
      position: absolute;
      inset: 0;
      content: "";
      border-radius: rd(small);
    }

    &::before {
      z-index: 0;
      background-color: t(canvas, transparent);

      // box-shadow: inset 0 0 5px -1px cl(white);
    }

    &::after {
      z-index: -1;
      filter: url("#glass-distortion");
      backdrop-filter: blur(0);
    }

    &-inner {
      display: flex;
      gap: sp(normal);
      align-items: center;
      justify-content: center;
      padding: sp(small) sp(small) sp(small) sp(normal);
      backdrop-filter: blur(1px);
    }
  }

  .container-small {
    .content-inner {
      padding: sp(small);
    }

    .content-text {
      display: none;
    }
  }
</style>
